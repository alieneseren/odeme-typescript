<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Ürün Yönetim Paneli</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; }
        .panel { max-width: 600px; margin: 60px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 16px #0001; padding: 32px 28px; }
    </style>
</head>
<body>
    <div class="panel">
        <div class="mb-2 text-end">
            <a href="odeme.html" class="btn btn-outline-primary btn-sm">Ödeme Paneli</a>
        </div>
        <h2 class="mb-4 text-center">Ürün Yönetim Paneli</h2>
        <form id="yeniUrunFormu" class="row g-2 mb-4">
            <div class="col-md-6">
                <input type="text" id="yeniUrunAd" class="form-control" placeholder="Ürün Adı" required>
            </div>
            <div class="col-md-4">
                <input type="number" id="yeniUrunFiyat" class="form-control" placeholder="Fiyat (TL)" required>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-success w-100">Ekle</button>
            </div>
        </form>
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>Ürün Adı</th>
                    <th>Fiyat (TL)</th>
                    <th style="width:120px">İşlem</th>
                </tr>
            </thead>
            <tbody id="urunlerTablo"></tbody>
        </table>
    </div>
    <script>
        function getUrunler() {
            return JSON.parse(localStorage.getItem('urunler')) || [
                { name: "Defter", price: 25.00 },
                { name: "Kalem", price: 7.50 },
                { name: "Silgi", price: 3.00 },
                { name: "Cetvel", price: 6.00 },
                { name: "Kalemlik", price: 30.00 },
                { name: "Pastel Boya", price: 45.00 },
                { name: "Makas", price: 12.00 },
                { name: "Yapıştırıcı", price: 8.00 },
                { name: "Klasör", price: 18.00 },
                { name: "Ders Programı", price: 2.50 }
            ];
        }
        function setUrunler(arr) {
            localStorage.setItem('urunler', JSON.stringify(arr));
        }
        function urunlerTabloGuncelle() {
            const urunler = getUrunler();
            const tbody = document.getElementById('urunlerTablo');
            tbody.innerHTML = '';
            urunler.forEach((u, i) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><input type="text" class="form-control" value="${u.name}" onchange="urunGuncelle(${i}, 'name', this.value)"></td>
                    <td><input type="number" class="form-control" value="${u.price}" min="0" step="0.01" onchange="urunGuncelle(${i}, 'price', this.value)"></td>
                    <td>
                        <button class="btn btn-danger btn-sm" onclick="urunSil(${i})">Sil</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }
        function urunGuncelle(i, alan, deger) {
            const urunler = getUrunler();
            if(alan==='price') deger = parseFloat(deger)||0;
            urunler[i][alan] = deger;
            setUrunler(urunler);
            urunlerTabloGuncelle();
        }
        function urunSil(i) {
            const urunler = getUrunler();
            urunler.splice(i,1);
            setUrunler(urunler);
            urunlerTabloGuncelle();
        }
        document.getElementById('yeniUrunFormu').onsubmit = function(e) {
            e.preventDefault();
            const ad = document.getElementById('yeniUrunAd').value.trim();
            const fiyat = parseFloat(document.getElementById('yeniUrunFiyat').value);
            if(!ad || isNaN(fiyat) || fiyat<0) return;
            const urunler = getUrunler();
            urunler.push({name:ad, price:fiyat});
            setUrunler(urunler);
            urunlerTabloGuncelle();
            this.reset();
        };
        urunlerTabloGuncelle();
    </script>
</body>
</html>
